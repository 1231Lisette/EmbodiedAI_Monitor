<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embodied AI Daily Monitor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        [x-cloak] { display: none !important; }
        /* Markdown ç®€æŠ¥æ ·å¼å¾®è°ƒ */
        .prose p { margin-bottom: 0.5em; }
        .prose ul { list-style-type: disc; padding-left: 1.2em; margin-bottom: 0.5em; }
        .prose strong { color: #1e293b; font-weight: 600; }
    </style>
</head>
<body>

<script src="data.js"></script>

<div x-data="dashboard()" x-init="initApp()" class="min-h-screen p-4 md:p-8 max-w-7xl mx-auto">

    <header class="mb-8 flex flex-col md:flex-row md:items-end justify-between">
        <div>
            <h1 class="text-3xl font-bold text-slate-800 tracking-tight flex items-center gap-2">
                <i data-feather="cpu" class="text-blue-600"></i>
                Embodied AI Monitor
            </h1>
            <p class="text-slate-500 mt-2">æ¯æ—¥è¿½è¸ªå…·èº«æ™ºèƒ½ã€Sim2Real ä¸æœºå™¨äººå­¦ä¹ å‰æ²¿</p>
        </div>
        <p class="text-xs text-slate-400 mt-2 md:mt-0 bg-white px-3 py-1 rounded-full border shadow-sm">
            Last update: <span x-text="lastUpdate" class="font-mono"></span>
        </script>
    </header>

    <div x-show="dailySummary" x-cloak class="mb-8 bg-gradient-to-br from-indigo-50 to-blue-50 border border-blue-100 rounded-xl p-6 shadow-sm relative overflow-hidden">
        <div class="absolute top-0 right-0 p-4 opacity-10">
            <i data-feather="message-square" width="100" height="100"></i>
        </div>
        <h2 class="text-lg font-bold text-indigo-900 mb-3 flex items-center gap-2">
            <i data-feather="zap" class="text-indigo-500" width="18"></i>
            ä»Šæ—¥ AI é‡ç‚¹è§£è¯»
        </h2>
        <div class="prose prose-sm text-slate-700 max-w-none leading-relaxed whitespace-pre-line" x-html="renderSummary(dailySummary)"></div>
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-6 sticky top-2 z-10 backdrop-blur-md bg-white/90">
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
            
            <nav class="flex space-x-1 p-1 bg-slate-100 rounded-lg self-start">
                <template x-for="tabName in ['papers', 'projects', 'models']">
                    <button @click="currentTab = tabName; page=1"
                        :class="currentTab === tabName ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'"
                        class="py-2 px-5 rounded-md text-sm font-semibold transition-all duration-200 capitalize"
                        x-text="tabName">
                    </button>
                </template>
            </nav>

            <div class="flex gap-3 w-full md:w-auto">
                <div class="relative w-full md:w-64">
                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-slate-400">
                        <i data-feather="search" width="16"></i>
                    </span>
                    <input type="text" x-model="searchQuery" placeholder="Search..."
                        class="pl-9 p-2 w-full bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none transition">
                </div>
                
                <select x-model="sortBy" class="p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none cursor-pointer">
                    <option value="score">ğŸ”¥ æ™ºèƒ½æ¨è</option>
                    <option value="date">ğŸ“… æœ€æ–°å‘å¸ƒ</option>
                </select>
            </div>
        </div>

        <div class="mt-4 pt-3 border-t border-slate-100 flex flex-wrap gap-2 items-center">
            <span class="text-xs font-bold text-slate-400 uppercase mr-1">Tags:</span>
            <template x-for="tag in presetTags" :key="tag">
                <button @click="toggleTag(tag)"
                    :class="selectedTags.includes(tag) ? 'bg-blue-600 text-white ring-2 ring-blue-200' : 'bg-white text-slate-600 border border-slate-200 hover:border-blue-400'"
                    class="px-2.5 py-1 text-xs font-medium rounded-full transition-all"
                    x-text="tag">
                </button>
            </template>
            <button x-show="selectedTags.length > 0" @click="selectedTags = []" class="text-xs text-red-500 hover:underline ml-auto">Clear</button>
        </div>
    </div>

    <div class="space-y-6">
        <div x-show="loading" class="flex justify-center py-20">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
        </div>

        <div x-show="!loading && filteredItems.length === 0" x-cloak class="text-center py-16 bg-white rounded-xl border border-dashed border-slate-200">
            <p class="text-slate-400">æš‚æ— ç›¸å…³å†…å®¹</p>
        </div>

        <div x-show="!loading && filteredItems.length > 0" x-cloak class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <template x-for="item in paginatedItems" :key="item.id">
                <div class="group bg-white p-5 rounded-xl border border-slate-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 flex flex-col h-full relative">
                    
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex gap-2">
                            <span :class="{
                                'bg-red-50 text-red-700 border-red-100': item.source === 'arXiv',
                                'bg-slate-100 text-slate-700 border-slate-200': item.source === 'GitHub',
                                'bg-yellow-50 text-yellow-700 border-yellow-100': item.source === 'HuggingFace'
                            }" class="text-[10px] font-bold px-2 py-1 rounded border uppercase tracking-wide" x-text="item.source"></span>
                            
                            <template x-if="item.score >= 4">
                                <span class="bg-orange-50 text-orange-600 border border-orange-100 text-[10px] font-bold px-2 py-1 rounded flex items-center gap-1">
                                    <i data-feather="trending-up" width="10"></i> Hot
                                </span>
                            </template>
                        </div>
                        <span class="text-xs text-slate-400 font-mono" x-text="item.date"></span>
                    </div>

                    <div class="mb-3">
                        <h3 class="text-base font-bold text-slate-800 leading-snug group-hover:text-blue-600 transition-colors">
                            <a :href="item.url" target="_blank" x-text="item.title" class="hover:underline decoration-blue-300 underline-offset-2"></a>
                        </h3>
                        <p class="text-xs text-slate-500 mt-1 truncate" x-text="item.author"></p>
                    </div>
                    
                    <p class="text-xs text-slate-600 mb-4 flex-grow leading-relaxed line-clamp-4" x-text="item.abstract"></p>
                    
                    <div class="mt-auto pt-3 border-t border-slate-50 flex items-center justify-between">
                        <div class="flex flex-wrap gap-1">
                            <template x-for="tag in item.tags.slice(0, 3)">
                                <span class="text-[10px] bg-slate-50 text-slate-600 px-1.5 py-0.5 rounded border border-slate-100" x-text="tag"></span>
                            </template>
                        </div>
                        
                        <div class="flex items-center text-xs font-medium text-slate-500">
                            <template x-if="item.source !== 'arXiv'">
                                <span class="flex items-center gap-1">
                                    <i data-feather="star" width="12"></i> <span x-text="item.stars"></span>
                                </span>
                            </template>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <div x-show="!loading && totalPages > 1" x-cloak class="flex justify-center gap-2 pt-6 pb-12">
            <button @click="page--; scrollToTop()" :disabled="page === 1" class="p-2 border rounded hover:bg-slate-50 disabled:opacity-50">Previous</button>
            <span class="px-4 py-2 text-sm text-slate-600 font-medium">Page <span x-text="page"></span></span>
            <button @click="page++; scrollToTop()" :disabled="page === totalPages" class="p-2 border rounded hover:bg-slate-50 disabled:opacity-50">Next</button>
        </div>
    </div>
</div>

<script>
    function dashboard() {
        return {
            loading: true,
            currentTab: 'papers',
            searchQuery: '',
            sortBy: 'score', // é»˜è®¤æŒ‰æ™ºèƒ½è¯„åˆ†æ’åº
            allData: [],
            dailySummary: '',
            lastUpdate: '',
            itemsPerPage: 12,
            page: 1,
            presetTags: [],
            selectedTags: [],

            initApp() {
                setTimeout(() => {
                    if (window.RESEARCH_DATA) {
                        this.allData = window.RESEARCH_DATA;
                        this.lastUpdate = window.LAST_UPDATE || '-';
                        // è¯»å– AI æ‘˜è¦
                        this.dailySummary = window.DAILY_SUMMARY || ''; 
                        
                        // æå–æ‰€æœ‰æ ‡ç­¾
                        const tags = new Set();
                        this.allData.forEach(i => i.tags.forEach(t => tags.add(t)));
                        this.presetTags = Array.from(tags).slice(0, 15); // åªæ˜¾ç¤ºå‰15ä¸ª
                        
                        this.loading = false;
                        this.$nextTick(() => feather.replace());
                    }
                }, 100);
            },

            renderSummary(text) {
                // ç®€å•çš„ Markdown ç²—ä½“æ¸²æŸ“
                return text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            },

            toggleTag(tag) {
                if (this.selectedTags.includes(tag)) this.selectedTags = this.selectedTags.filter(t => t !== tag);
                else this.selectedTags.push(tag);
                this.page = 1;
            },
            
            scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); },

            get filteredItems() {
                let items = this.allData.filter(i => i.type === this.currentTab);
                
                if (this.searchQuery) {
                    const q = this.searchQuery.toLowerCase();
                    items = items.filter(i => i.title.toLowerCase().includes(q) || i.abstract.toLowerCase().includes(q));
                }

                if (this.selectedTags.length) {
                    items = items.filter(i => this.selectedTags.every(t => i.tags.includes(t)));
                }

                return items.sort((a, b) => {
                    if (this.sortBy === 'score') return b.score - a.score; // æ™ºèƒ½è¯„åˆ†é™åº
                    return new Date(b.date) - new Date(a.date);
                });
            },

            get paginatedItems() {
                const start = (this.page - 1) * this.itemsPerPage;
                return this.filteredItems.slice(start, start + this.itemsPerPage);
            },
            
            get totalPages() { return Math.ceil(this.filteredItems.length / this.itemsPerPage) || 1; }
        }
    }
</script>
</body>
</html>